<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Dhruv!!</title>
    <style>
        /* Import Google Font for 'Pacifico' */
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            overflow-x: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .page {
            display: none;
            min-height: 100vh;
            padding: 20px;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            position: relative;
        }

        .page.active {
            display: flex;
        }

        .container {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
            max-width: 700px;
            width: 100%;
            animation: fadeInUp 1s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: white;
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        h2 {
            color: white;
            font-size: 2em;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .countdown {
            display: flex; /* Changed to flex to center content */
            justify-content: center; /* Center horizontally */
            align-items: center; /* Center vertically */
            flex-wrap: wrap; /* Allow items to wrap if needed */
            gap: 20px;
            margin: 30px 0;
            min-height: 100px; /* Ensure enough height for the message */
        }

        .countdown-item {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            color: white;
            font-weight: bold;
        }

        .countdown-number {
            font-size: 2.5em;
            display: block;
        }

        .countdown-label {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .btn {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .quiz-container {
            color: white;
            max-width: 600px;
        }

        .question {
            font-size: 1.4em;
            margin-bottom: 30px;
            line-height: 1.4;
        }

        .answer-input {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            margin-bottom: 20px;
            outline: none;
            transition: all 0.3s ease;
        }

        .answer-input:focus {
            border-color: #ff6b6b;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.3);
        }

        .submit-btn {
            background: linear-gradient(45deg, #46d160, #5cbf2a);
            padding: 12px 25px;
            font-size: 1.1em;
        }

        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin: 30px 0;
            max-width: 800px;
        }

        .photo-frame {
            background: white;
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transform: rotate(-1deg);
            transition: transform 0.3s ease;
        }

        .photo-frame:nth-child(even) {
            transform: rotate(1deg);
        }

        .photo-frame:hover {
            transform: rotate(0deg) scale(1.03);
        }

        .photo-actual {
            width: 100%;
            height: 200px; /* Fixed height for consistency */
            object-fit: cover; /* Ensures image covers the area without distortion */
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .photo-caption {
            color: #333;
            font-style: italic;
            font-size: 0.9em; /* Slightly smaller for captions */
            line-height: 1.3;
            font-weight: 500; /* Make captions a bit bolder */
        }

        .message-card {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            padding: 40px;
            border-radius: 25px;
            margin: 30px 0;
            font-size: 1.3em;
            line-height: 1.7;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            position: relative;
            text-align: left;
        }

        .message-card::before {
            content: '"';
            font-size: 5em;
            color: #ff6b6b;
            position: absolute;
            top: -15px;
            left: 25px;
            opacity: 0.3;
        }

        .hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .heart {
            position: absolute;
            color: rgba(255, 255, 255, 0.6);
            font-size: 20px;
            animation: floating 6s infinite linear;
        }

        @keyframes floating {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-10vh) rotate(360deg);
                opacity: 0;
            }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            animation: confetti-fall 3s linear infinite;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        .final-photo {
            width: 100%;
            max-width: 500px;
            height: 600px;
            background: white;
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.5em;
            margin: 30px auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
            padding: 20px;
        }

        .celebration-hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .celebration-heart {
            position: absolute;
            color: rgba(255, 107, 107, 0.7);
            font-size: 25px;
            animation: celebration-float 4s infinite ease-in-out;
        }

        @keyframes celebration-float {
            0%, 100% { 
                transform: translateY(0) scale(1);
                opacity: 0.7;
            }
            50% { 
                transform: translateY(-15px) scale(1.1);
                opacity: 1;
            }
        }

        .birthday-title {
            font-size: 3.5em;
            color: white;
            text-align: center;
            margin: 20px 0;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            animation: rainbow 3s infinite;
        }

        @keyframes rainbow {
            0% { color: #ff6b6b; }
            16% { color: #feca57; }
            32% { color: #48cae4; }
            48% { color: #f72585; }
            64% { color: #4cc9f0; }
            80% { color: #a8e6cf; }
            100% { color: #ff6b6b; }
        }

        .quiz-feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
        }

        .correct {
            background: rgba(46, 204, 113, 0.8);
            color: white;
        }

        .incorrect {
            background: rgba(231, 76, 60, 0.8);
            color: white;
        }

        .locked-message {
            color: #feca57;
            font-size: 0.9em; /* Even smaller */
            margin-top: 20px;
            padding: 8px; /* Reduced padding */
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            text-align: center;
        }

        .birthday-unlocked {
            background: rgba(46, 204, 113, 0.8);
            color: white;
            font-size: 1.2em; /* Smaller font for unlocked message */
            animation: none; /* Removed pulse animation */
            padding: 8px 15px; /* Adjusted padding */
            border-radius: 10px; /* Added border-radius */
            display: inline-block; /* Ensure it respects padding/margin */
        }

        /* Styles for the animated birthday message */
        .birthday-celebration-message {
            font-family: 'Pacifico', cursive; /* Updated font */
            font-size: 3.5em;
            color: #fff;
            /* Enhanced text-shadow for a glowing, multi-color effect */
            text-shadow: 
                0 0 7px #ff6b6b, /* Red */
                0 0 10px #feca57, /* Orange */
                0 0 15px #48cae4, /* Light Blue */
                0 0 20px #f72585, /* Pink */
                0 0 25px #4cc9f0, /* Sky Blue */
                0 0 30px #a8e6cf; /* Light Green */
            /* Removed animation: fade-in-scale 1.5s ease-out forwards; */
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
            text-align: center; /* Ensure text itself is centered */
            width: 100%; /* Take full width of parent */
            /* Removed position: relative and overflow: hidden as hearts are now inline */
        }

        /* New animation for the birthday message: fade in and slight scale */
        @keyframes fade-in-scale {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Styles for the inline hearts */
        .inline-heart {
            font-size: 0.8em; /* Make inline hearts slightly smaller than main text */
            color: #ff6b6b; /* Red heart color */
            display: inline-block; /* Allows transform */
            animation: inline-heart-pulse 1.5s infinite ease-in-out;
            margin: 0 5px; /* Space around the hearts */
        }

        @keyframes inline-heart-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
    </style>
</head>
<body>
    <!-- Floating Hearts -->
    <div class="hearts" id="hearts"></div>

    <!-- Page 1: Countdown -->
    <div class="page active" id="page1">
        <div class="container">
            <h1 id="countdownTitle">🎉 Birthday Countdown 🎉</h1>
            <div class="countdown" id="countdown">
                <div class="countdown-item">
                    <span class="countdown-number" id="days">00</span>
                    <span class="countdown-label">Days</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-number" id="hours">00</span>
                    <span class="countdown-label">Hours</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-number" id="minutes">00</span>
                    <span class="countdown-label">Minutes</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-number" id="seconds">00</span>
                    <span class="countdown-label">Seconds</span>
                </div>
            </div>
            <p style="color: white; font-size: 1.2em; margin: 20px 0;" id="countdownMessage">
                The most special day is coming! Get ready for an amazing celebration! 💖
            </p>
            <button class="btn" id="startButton" onclick="nextPage()" disabled>Start the Journey →</button>
            <div class="locked-message" id="lockedMessage">
                ⏳ The birthday journey will unlock when the countdown reaches zero! ⏳
            </div>
        </div>
    </div>

    <!-- Page 2: First Message -->
    <div class="page" id="page2">
        <div class="container">
            <h2>💕 A Message from My Heart</h2>
            <div class="message-card">
                Before our engagement, I always thought it would only mean more responsibilities and challenges to carry. But with you, it has been nothing like that — instead, I've found strength, comfort, and the kind of support I never imagined. You've helped me solve problems I couldn't figure out on my own and made me feel at home in your company. With you, everything feels lighter, happier, and more meaningful. On your special day, I just want you to know how grateful I am for you and how lucky I feel to walk this journey with you. Happy Birthday.
            </div>
            <button class="btn" onclick="nextPage()">Continue →</button>
        </div>
    </div>

    <!-- Page 3: First Question -->
    <div class="page" id="page3">
        <div class="container">
            <div class="quiz-container">
                <h2>💭 A Question for You</h2>
                <div class="question">If you could describe "us" in just three words, what would they be?</div>
                <input type="text" class="answer-input" id="answer1" placeholder="Type your three words here...">
                <button class="submit-btn btn" onclick="submitAnswer(1)">Submit Answer</button>
                <div class="quiz-feedback" id="quiz1Feedback" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Page 4: Photo Gallery -->
    <div class="page" id="page4">
        <div class="container">
            <h2>📸 Capturing You </h2>
            <div class="photo-gallery" style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; margin-top: 20px;">
                <figure class="photo-frame">
                    <img class="photo-actual" src="https://raw.githubusercontent.com/FORAM-09/new_repo/main/4.png" alt="A beautiful memory of us laughing together.">
                    <figcaption class="photo-caption">A beautiful memory of us laughing together.</figcaption>
                </figure>
                <figure class="photo-frame">
                    <img class="photo-actual" src="https://raw.githubusercontent.com/FORAM-09/new_repo/main/15.jpg" alt="Our first adventure, full of excitement.">
                    <figcaption class="photo-caption">Our first adventure, full of excitement.</figcaption>
                </figure>
                <figure class="photo-frame">
                    <img class="photo-actual" src="https://raw.githubusercontent.com/FORAM-09/new_repo/main/22.jpg" alt="Quiet moments, just being ourselves.">
                    <figcaption class="photo-caption">Quiet moments, just being ourselves.</figcaption>
                </figure>
                <figure class="photo-frame">
                    <img class="photo-actual" src="https://raw.githubusercontent.com/FORAM-09/new_repo/main/5.jpg" alt="Building dreams, one step at a time.">
                    <figcaption class="photo-caption">Building dreams, one step at a time.</figcaption>
                </figure>
            </div>
            <button class="btn" onclick="nextPage()">Continue the Journey →</button>
        </div>
    </div>

    <!-- Page 5: Second Question -->
    <div class="page" id="page5">
        <div class="container">
            <div class="quiz-container">
                <h2>🍳 Another Question</h2>
                <div class="question">If I cooked for you, which dish would you hope I'd try first?</div>
                <input type="text" class="answer-input" id="answer2" placeholder="Tell me your favorite dish...">
                <button class="submit-btn btn" onclick="submitAnswer(2)">Submit Answer</button>
                <div class="quiz-feedback" id="quiz2Feedback" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Page 6: Second Message -->
    <div class="page" id="page6">
        <div class="container">
            <h2>✨ Cherished Memories</h2>
            <div class="message-card">
                A New Year's night where our first words found their way, roads at midnight where time forgot to count, your eyes meeting mine between quiet sips of coffee. Gardens that bloomed with our footsteps. Though miles lie between us now, every memory carries you closer. And today, I celebrate you — the one who makes every moment worth remembering.
            </div>
            <button class="btn" onclick="nextPage()">Almost There →</button>
        </div>
    </div>

    <!-- Page 7: Third Question -->
    <div class="page" id="page7">
        <div class="container">
            <div class="quiz-container">
                <h2>🤔 Final Question</h2>
                <div class="question">What's the most unexpected thing you've learned about me so far?</div>
                <input type="text" class="answer-input" id="answer3" placeholder="Share what surprised you about me...">
                <button class="submit-btn btn" onclick="submitAnswer(3)">Submit Answer</button>
                <div class="quiz-feedback" id="quiz3Feedback" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Page 8: Final Celebration -->
    <div class="page" id="page8">
        <div class="container">
            <h1 class="birthday-title">🎂 Happy Birthday Dhruv! 🎂</h1>
            <div class="final-photo">
                <div class="celebration-hearts" id="celebrationHearts"></div>
                <div style="z-index: 2; text-align: center;">
                    <img src="https://raw.githubusercontent.com/FORAM-09/new_repo/main/Merged.png" alt="Your Special Birthday Photo" style="max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 15px;">
                </div>
            </div>
            <div style="color: white; font-size: 1.3em; margin-top: 20px; text-align: center; line-height: 1.6;">
                Wishing you the most wonderful birthday filled with love, laughter, and all your heart desires! 🎉💕
            </div>
        </div>
    </div>

    <script>
        let currentPage = 1;
        const totalPages = 8;
        let countdownInterval;
        let isUnlocked = false;
        let answeredQuestions = [false, false, false];

        // Get current Chicago time and add 40 seconds for demo
        function getTargetDate() {
            const now = new Date();
            const chicagoNow = new Date(now.toLocaleString("en-US", {timeZone: "America/Chicago"}));
            // Add 40 seconds to current Chicago time for demo
            return new Date(chicagoNow.getTime() + 40 * 1000);
        }

        function updateCountdown() {
            if (countdownInterval) clearInterval(countdownInterval);
            
            const targetDate = getTargetDate();
            
            countdownInterval = setInterval(() => {
                const now = new Date();
                const chicagoTime = new Date(now.toLocaleString("en-US", {timeZone: "America/Chicago"}));
                const distance = targetDate.getTime() - chicagoTime.getTime();

                if (distance < 0) {
                    // Construct the birthday message with inline hearts
                    const birthdayMessageHtml = `
                        <span class="inline-heart">💖</span>
                        Happy Birthday, Dhruv! 
                        <span class="inline-heart">💖</span>
                    `;
                    document.getElementById('countdown').innerHTML = `<div class="birthday-celebration-message">${birthdayMessageHtml}</div>`;
                    
                    // Hide the countdown message and title
                    document.getElementById('countdownMessage').style.display = 'none';
                    document.getElementById('countdownTitle').style.display = 'none';


                    unlockWebsite();
                    // Confetti is no longer triggered here
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            }, 1000);
        }

        function unlockWebsite() {
            isUnlocked = true;
            const startButton = document.getElementById('startButton');
            const lockedMessage = document.getElementById('lockedMessage');
            
            startButton.style.opacity = '1';
            startButton.style.cursor = 'pointer';
            startButton.disabled = false;
            startButton.style.background = 'linear-gradient(45deg, #46d160, #5cbf2a)';
            lockedMessage.innerHTML = '🎉 UNLOCKED! Click to start your journey! 🎉'; /* Shorter message */
            lockedMessage.className = 'locked-message birthday-unlocked';
        }

        function nextPage() {
            if (!isUnlocked && currentPage === 1) {
                return;
            }
            
            if (currentPage < totalPages) {
                document.getElementById('page' + currentPage).classList.remove('active');
                currentPage++;
                document.getElementById('page' + currentPage).classList.add('active');
                
                if (currentPage === 8) {
                    createCelebrationHearts();
                    // Confetti is no longer triggered here
                }
            }
        }

        function submitAnswer(questionNum) {
            const answer = document.getElementById('answer' + questionNum).value.trim();
            const feedback = document.getElementById('quiz' + questionNum + 'Feedback');
            
            if (answer === '') {
                feedback.style.display = 'block';
                feedback.textContent = 'Please write something before submitting! 💕';
                feedback.className = 'quiz-feedback incorrect';
                return;
            }
            
            // Store the answer
            localStorage.setItem('question' + questionNum + 'Answer', answer);
            
            // Send email with the answer
            sendAnswerEmail(questionNum, answer);
            
            feedback.style.display = 'block';
            feedback.textContent = 'Beautiful answer! Thank you for sharing your heart with me. 💕';
            feedback.className = 'quiz-feedback correct';
            answeredQuestions[questionNum - 1] = true;
            
            setTimeout(() => {
                nextPage();
            }, 2500);
        }

        function sendAnswerEmail(questionNum, answer) {
            const questions = [
                "If you could describe 'us' in just three words, what would they be?",
                "If I cooked for you, which dish would you hope I'd try first?",
                "What's the most unexpected thing you've learned about me so far?"
            ];
            
            fetch('http://localhost:8000/submit-answer', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ questionNum: questionNum, answer: answer }),
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.text();
            })
            .then(data => {
                console.log('Server response:', data);
            })
            .catch((error) => {
                console.error('Error sending answer to server:', error);
                // Optional fallback to mailto or alert here if you want
            });

            console.log(`Question ${questionNum}: ${questions[questionNum - 1]}`);
            console.log(`Answer: ${answer}`);
        }

        function createHearts() {
            const heartsContainer = document.getElementById('hearts');
            setInterval(() => {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = '💖';
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDuration = (Math.random() * 3 + 3) + 's';
                heartsContainer.appendChild(heart);

                setTimeout(() => {
                    if (heart.parentNode) {
                        heart.remove();
                    }
                }, 6000);
            }, 800);
        }

        function createCelebrationHearts() {
            const heartsContainer = document.getElementById('celebrationHearts');
            if (!heartsContainer) return;
            
            const heartPositions = [
                {left: '10%', top: '15%', delay: '0s'},
                {left: '85%', top: '20%', delay: '0.5s'},
                {left: '15%', top: '75%', delay: '1s'},
                {left: '80%', top: '70%', delay: '1.5s'},
                {left: '50%', top: '10%', delay: '2s'},
                {left: '50%', top: '85%', delay: '2.5s'},
                {left: '25%', top: '50%', delay: '3s'},
                {left: '75%', top: '45%', delay: '3.5s'}
            ];

            heartPositions.forEach((pos, index) => {
                const heart = document.createElement('div');
                heart.className = 'celebration-heart';
                heart.innerHTML = '💖';
                heart.style.left = pos.left;
                heart.style.top = pos.top;
                heart.style.animationDelay = pos.delay;
                heartsContainer.appendChild(heart);
            });
        }

        // Confetti function is now unused for the countdown unlock, but kept for other potential uses
        function createConfetti() {
            const colors = ['#ff6b6b', '#feca57', '#48cae4', '#f72585', '#4cc9f0'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 3 + 's';
                    document.body.appendChild(confetti);

                    setTimeout(() => {
                        if (confetti.parentNode) {
                            confetti.remove();
                        }
                    }, 3000);
                }, i * 100);
            }
        }

        // Initialize everything when page loads
        window.addEventListener('load', function() {
            updateCountdown();
            createHearts();
        });
    </script>
</body>
</html>